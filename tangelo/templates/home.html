{% extends 'base.html' %}
{% load cache %}

{% block title %}images by shacker{% endblock title %}

{% block content %}

  <div class="row">
      {% for category in categories %}
        <div class="row">
          <a href="{% url 'category' category.slug %}">
            {# None = No expiration to cache - expire manually #}
            {% cache None category_thumb category.slug %}
              <div class="col-12 mx-auto mb-4">
                <img
                  class="screen mr-4 rounded"
                  {% with category.cat_thumb.get_thumbnail as thumbnail %}
                    {% if thumbnail %}
                      src="{{ category.cat_thumb.get_thumbnail.embed_url }}"
                    {% else %}
                      src="/static/img/default_thumb.jpg"
                    {% endif %}
                  {% endwith %}
                  alt="Thumbnail image"
                >
                <br /><a href="{% url 'category' category.slug %}">{{ category.title }}</a>
              </div>
            {% endcache %}
        </a>
        </div>
      {% endfor %}
  </div>

{% endblock content %}
