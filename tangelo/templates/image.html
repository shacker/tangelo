{% extends 'base.html' %}
{% load static cache %}

{% block title %}{{ block.super }} - {{ img_data.title }}{% endblock title %}

{% block content %}

  <h2 class="full_img_title">{{ img_data.title }}</h2>

  {% cache None flickr_full img.flickr_id %}
      <a
        data-flickr-embed="true"
        href="{{ img_data.flickr_page_url }}"
        title="{{ img_data.title }}">
        <img src="{{ img_data.flickr_embed_url }}" class="img-fluid" alt="{{ img_data.title }}">
      </a>
      <p class="mt-2 image_caption">{{ img_data.description }}</p>
      <p><small class="text-muted">Taken: {{ img.taken }}</small></p>
  {% endcache %}


  <div class="navigation">
    {% if prev_next_ids.prev %}
      <a href="{% url 'image' img.album.slug prev_next_ids.prev %}" class="btn btn-sm btn-primary">&laquo; Previous</a>
    {% endif %}

    <a href="{% url 'album' img.album.slug %}" class="btn btn-secondary btn-sm">{{ img.album.title }}</a>

    {% if prev_next_ids.next %}
      <a href="{% url 'image' img.album.slug prev_next_ids.next %}" class="btn btn-sm btn-primary">Next &raquo;</a>
    {% endif %}
  </div>

   <p>
    <a href="{{ img_data.flickr_page_url }}" target="_blank">
      <img src="{% static "ico/flickr-icon.png" %}" alt="Flickr icon" width="50">
    </a>
  </p>

  {% if user.is_superuser %}
    <p class="small muted-text">
      <<
      <a href="{% url 'admin:gallery_image_change' img.id %}">Edit</a> |
      <a href="{% url 'refetch' img.flickr_id %}">Refetch</a> |
      <a href="{% url 'flush_cache' img.flickr_id %}">Flush</a>
      >>
    </p>
  {% endif %}

{% endblock content %}
